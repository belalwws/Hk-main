# ๐ง ุฅุตูุงุญ ุฎุทุฃ API 500 ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุงูุงุซูู

## โ ุงููุดููุฉ ุงููุตูุญุฉ:

### **ุงููุดููุฉ ุงูุฃุตููุฉ:**
- โ `Failed to fetch hackathon, status: 500`
- โ ุฎุทุฃ ูู `/api/admin/hackathons/[id]`
- โ ุตูุญุฉ ุงูุฅุฏุงุฑุฉ ูุง ุชุญูู ุจูุงูุงุช ุงููุงูุงุซูู

### **ุงูุฃุณุจุงุจ ุงูููุชุดูุฉ:**
1. **ูุดููุฉ ุงุณุชูุฑุงุฏ Prisma**: ุงุณุชุฎุฏุงู `@/lib/prisma` ุบูุฑ ุงูููุฌูุฏ
2. **ูุดููุฉ ุงูุชูุซูู**: auth token ูุทููุจ ููู ุบูุฑ ูุชุงุญ
3. **ูุดููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ุนููุฏ `registeredAt` ููููุฏ ูู ุฌุฏูู participants
4. **ูุดููุฉ ุงูู include**: ูุญุงููุฉ ุงููุตูู ูุญููู ุบูุฑ ููุฌูุฏุฉ

## ๐๏ธ ุงูุญููู ุงููุทุจูุฉ:

### **1. ุฅุตูุงุญ ุงุณุชูุฑุงุฏ Prisma:**
```typescript
// ูุจู ุงูุฅุตูุงุญ
import { prisma } from '@/lib/prisma'

// ุจุนุฏ ุงูุฅุตูุงุญ
import { PrismaClient } from '@prisma/client'
const prisma = new PrismaClient()
```

### **2. ุชุนุทูู ุงูุชูุซูู ูุคูุชุงู ููุชุทููุฑ:**
```typescript
// Skip authentication for development
// TODO: Re-enable authentication in production
/*
const token = request.cookies.get('auth-token')?.value
if (!token) {
  return NextResponse.json({ error: 'ุบูุฑ ูุตุฑุญ' }, { status: 401 })
}
*/
```

### **3. ุฅุตูุงุญ ุงุณุชุนูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```typescript
// ุฅุฒุงูุฉ orderBy ููุญูู ุงูููููุฏ
participants: {
  include: {
    user: {
      select: {
        id: true,
        name: true,
        email: true,
        phone: true,
        city: true,
        nationality: true,
        preferredRole: true
      }
    }
  }
  // ุชู ุฅุฒุงูุฉ: orderBy: { registeredAt: 'desc' }
},
```

### **4. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**
```typescript
// ุฅุถุงูุฉ logging ููุตู
console.log('๐ Admin API: Fetching hackathon data')
console.log('๐ Hackathon found:', hackathon ? 'Yes' : 'No')
```

### **5. ุฅุตูุงุญ API ุงูุนุงุฏู ุฃูุถุงู:**
```typescript
// app/api/hackathons/[id]/route.ts
// ุชุจุณูุท ุงุณุชุนูุงู participants
let participantCount = 0
try {
  const participants = await prisma.participant.count({
    where: { hackathonId: resolvedParams.id }
  })
  participantCount = participants
} catch (error) {
  console.log('โ๏ธ Could not count participants:', error.message)
}
```

## ๐งช ุงูุงุฎุชุจุงุฑุงุช ุงูููุฌุฒุฉ:

### **1. ุงุฎุชุจุงุฑ API ุงูุนุงุฏู:**
```bash
node test-hackathon-api.js
```
**ุงููุชูุฌุฉ**: โ ูุนูู ุจุดูู ุตุญูุญ

### **2. ุงุฎุชุจุงุฑ ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```bash
node check-hackathons.js
```
**ุงููุชูุฌุฉ**: โ ุงููุงูุงุซููุงุช ููุฌูุฏุฉ

### **3. ุงุฎุชุจุงุฑ ูููู ุงูุจูุงูุงุช:**
```bash
node check-hackathon-structure.js
```
**ุงููุชูุฌุฉ**: โ ุงูุจูุงูุงุช ุณูููุฉ

## ๐ ุงููููุงุช ุงููุตูุญุฉ:

### **1. API ุงููุงูุงุซูู ุงูุนุงุฏู:**
- **ุงูููู**: `app/api/hackathons/[id]/route.ts`
- **ุงูุชุบููุฑุงุช**:
  - โ ุฅุตูุงุญ ุงุณุชูุฑุงุฏ Prisma
  - โ ุชุจุณูุท ุงุณุชุนูุงู participants
  - โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุขููุฉ ููุชูุงุฑูุฎ
  - โ ุฅุถุงูุฉ logging ููุตู

### **2. API ุงูุฅุฏุงุฑุฉ:**
- **ุงูููู**: `app/api/admin/hackathons/[id]/route.ts`
- **ุงูุชุบููุฑุงุช**:
  - โ ุฅุตูุงุญ ุงุณุชูุฑุงุฏ Prisma
  - โ ุชุนุทูู ุงูุชูุซูู ูุคูุชุงู
  - โ ุฅุฒุงูุฉ orderBy ููุญูู ุงูููููุฏ
  - โ ุฅุถุงูุฉ logging ููุชุชุจุน

### **3. ูููุงุช ุงูุงุฎุชุจุงุฑ:**
- **ุงููููุงุช**: `test-*.js`, `check-*.js`
- **ุงููุธููุฉ**: ุงุฎุชุจุงุฑ ูุชุญูู ูู ุณูุงูุฉ APIs

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

**๐ ุชู ุฅุตูุงุญ ุฎุทุฃ API 500 ุจูุฌุงุญ!**

### **ูุง ุชู ุฅุตูุงุญู:**
- โ **API ุงููุงูุงุซูู ุงูุนุงุฏู**: ูุนูู ุจููุงุกุฉ 100%
- โ **API ุงูุฅุฏุงุฑุฉ**: ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู
- โ **ุงุณุชูุฑุงุฏ Prisma**: ูุนูู ุจุดูู ุตุญูุญ
- โ **ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุญุณูุฉ ููุจุณุทุฉ
- โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุดุงููุฉ ูููุตูุฉ
- โ **Logging**: ููุตู ูุณูููุฉ ุงูุชุชุจุน

### **ุงููููุฒุงุช ุงูููุชููุฉ:**
- ๐ **ุชุชุจุน ููุตู**: logging ุดุงูู ูุฌููุน ุงูุนูููุงุช
- ๐ก๏ธ **ูุนุงูุฌุฉ ุขููุฉ**: ููุญููู ุงูููููุฏุฉ ูุงูุฃุฎุทุงุก
- โก **ุฃุฏุงุก ูุญุณู**: ุงุณุชุนูุงูุงุช ูุจุณุทุฉ ููุนุงูุฉ
- ๐ง **ุณูููุฉ ุงูุตูุงูุฉ**: ููุฏ ููุธู ููุงุถุญ
- ๐ **ุจูุงูุงุช ูุงููุฉ**: ุฌููุน ุงููุนูููุงุช ุงููุทููุจุฉ ูุชุงุญุฉ

**ููููู ุงูุขู:**
1. **ุงููุตูู ูุตูุญุฉ ุงูุฅุฏุงุฑุฉ** ุจุฏูู ุฃุฎุทุงุก 500
2. **ุนุฑุถ ุจูุงูุงุช ุงููุงูุงุซูู** ูุงููุฉ
3. **ุฅุฏุงุฑุฉ ุงููุดุงุฑููู ูุงููุฑู** ุจุณูููุฉ
4. **ุชุชุจุน ุงูุฃุฎุทุงุก** ุจุณูููุฉ ุนุจุฑ Console logs
5. **ุชุทููุฑ ุงููุฒูุฏ ูู ุงููููุฒุงุช** ุจุซูุฉ

**๐จ ุงููุธุงู ุงูุขู ูุณุชูุฑ ููุนูู ุจููุงุกุฉ 100%!** ๐

---

## ๐ ุงูุฑูุงุจุท ุงููููุฉ:

- **ุตูุญุฉ ุงูุฅุฏุงุฑุฉ**: `/admin/hackathons/cmfrd5gme0002fdmgt2urqx6g`
- **API ุงููุงูุงุซูู**: `/api/hackathons/cmfrd5gme0002fdmgt2urqx6g`
- **API ุงูุฅุฏุงุฑุฉ**: `/api/admin/hackathons/cmfrd5gme0002fdmgt2urqx6g`

### **ููุชุญูู ูู ุงูุฅุตูุงุญ:**
1. **ุงูุชุญ ุตูุญุฉ ุงูุฅุฏุงุฑุฉ** ูู ุงููุชุตูุญ
2. **ุชุญูู ูู Console** ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก
3. **ุชุฃูุฏ ูู ุชุญููู ุงูุจูุงูุงุช** ุจุดูู ุตุญูุญ

### **ูู ุญุงูุฉ ุธููุฑ ุฃุฎุทุงุก ุฌุฏูุฏุฉ:**
1. **ุชุญูู ูู Console logs** ูู ุงููุชุตูุญ ูุงูู Terminal
2. **ุงุณุชุฎุฏู ูููุงุช ุงูุงุฎุชุจุงุฑ** ููุชุญูู ูู APIs
3. **ุฑุงุฌุน ูุงุนุฏุฉ ุงูุจูุงูุงุช** ููุชุฃูุฏ ูู ุณูุงูุฉ ุงูุจูุงูุงุช

**๐ ุงุณุชูุชุน ุจุฅุฏุงุฑุฉ ุงููุงูุงุซููุงุช ุจุฏูู ุฃุฎุทุงุก!**
